---
warning: DO NOT CHANGE THIS MANUALLY, THIS IS GENERATED BY https://github/duckdb/community-extensions repository, check README there
title: clamp
excerpt: |
  DuckDB Community Extensions
  Provides mathematical clamp functions for numeric types in DuckDB, including general clamping, saturate, and others. Ensures values stay within a specified range and handles NULLs and NaNs correctly.

extension:
  name: clamp
  description: Provides mathematical clamp functions for numeric types in DuckDB, including general clamping, saturate, and others. Ensures values stay within a specified range and handles NULLs and NaNs correctly.
  version: 0.1.0
  language: C++
  build: cmake
  license: MIT
  maintainers:
    - oglego

repo:
  github: oglego/duckdb_clamp
  ref: 636947f33bdce27f980c8c0f40e3bb1024c0ba79

docs:
  hello_world: |
    -- General clamp between min and max
    SELECT clamp(5, 0, 10);      -- Returns 5
    SELECT clamp(-5, 0, 10);     -- Returns 0
    SELECT clamp(15, 0, 10);     -- Returns 10

    -- NULL handling
    SELECT clamp(NULL, 0, 10);   -- Returns NULL
    SELECT clamp(5, NULL, 10);   -- Returns NULL
    SELECT clamp(5, 0, NULL);    -- Returns NULL

    -- Convenience clip (alias for clamp)
    SELECT clip(15, 10, 20);  -- Returns 15
    SELECT clip(5, 10, 20);   -- Returns 10
    SELECT clip(25, 10, 20);  -- Returns 20

    -- Saturate (equivalent to clamp(x, 0.0, 1.0))
    SELECT saturate(0.5);        -- Returns 0.5
    SELECT saturate(-0.5);       -- Returns 0.0
    SELECT saturate(1.5);        -- Returns 1.0

    -- Convenience clamp01 (alias for saturate)
    SELECT clamp01(0.7);         -- Returns 0.7
    SELECT clamp01(-1.0);        -- Returns 0.0
    SELECT clamp01(2.0);         -- Returns 1.0

    -- Handling NaN and NULL
    SELECT clamp(CAST('NaN' AS DOUBLE), 0, 10); -- Returns NaN
    SELECT saturate(NULL);                      -- Returns NULL

    -- Wrap a value into a range [min, max) using modular arithmetic
    SELECT wrap(11, 0, 10);      -- Returns 1
    SELECT wrap(25, 10, 20);     -- Returns 15
    SELECT wrap(5, 10, 20);      -- Returns 15

    -- Pingpong a value between min and max
    SELECT pingpong(11, 0, 10);  -- Returns 9
    SELECT pingpong(12, 10, 20); -- Returns 12
    SELECT pingpong(28, 10, 20); -- Returns 12

    -- Fract (returns the fractional part of a number)
    SELECT fract(1.75);          -- Returns 0.75
    SELECT fract(-0.1);          -- Returns 0.9
    SELECT fract(10);            -- Returns 0.0

  extended_description: |
    The Clamp extension provides functions for numerical restriction:

    1. **clamp(value, min, max)**: Restricts a numeric value between `min` and `max`.
       - Supports NaN propagation (IEEE-754 standard)
       - Throws an exception if `min > max`
       - Returns NULL if any argument is NULL

    2. **clip(value, min, max)**: Alias for `clamp(value, min, max)`.

    3. **saturate(value)**: Convenience function to clamp values between 0.0 and 1.0.

    4. **clamp01(value)**: Alias for `saturate(value)`.

    5. **wrap(value, min, max)**: Wrap a value x into the range [min, max) using modular arithmetic.

    6. **pingpong(value, min, max)**: Return a value that "bounces" back and forth between the min and max.

    7. **fract(value)**: Return the fractional part of a number.

    This extension ensures safe handling of edge cases including:
    - NaN values
    - NULLs
    - Floating-point numbers
    - Large integers

extension_star_count: 2
extension_star_count_pretty: 2
extension_download_count: 322
extension_download_count_pretty: 322
image: '/images/community_extensions/social_preview/preview_community_extension_clamp.png'
layout: community_extension_doc
---

### Installing and Loading
```sql
INSTALL {{ page.extension.name }} FROM community;
LOAD {{ page.extension.name }};
```

{% if page.docs.hello_world %}
### Example
```sql
{{ page.docs.hello_world }}```
{% endif %}

{% if page.docs.extended_description %}
### About {{ page.extension.name }}
{{ page.docs.extended_description }}
{% endif %}

### Added Functions

<div class="extension_functions_table"></div>

| function_name | function_type | description | comment | examples |
|---------------|---------------|-------------|---------|----------|
| clamp         | scalar        | NULL        | NULL    |          |
| clamp01       | scalar        | NULL        | NULL    |          |
| clip          | scalar        | NULL        | NULL    |          |
| fract         | scalar        | NULL        | NULL    |          |
| pingpong      | scalar        | NULL        | NULL    |          |
| saturate      | scalar        | NULL        | NULL    |          |
| wrap          | scalar        | NULL        | NULL    |          |


