---
warning: DO NOT CHANGE THIS MANUALLY, THIS IS GENERATED BY https://github/duckdb/community-extensions repository, check README there
title: web_archive
excerpt: |
  DuckDB Community Extensions
  Query Common Crawl and Wayback Machine web archive CDX APIs directly from SQL

extension:
  name: web_archive
  description: Query Common Crawl and Wayback Machine web archive CDX APIs directly from SQL
  version: '2026020301'
  language: C++
  build: cmake
  license: MIT
  excluded_platforms: windows_amd64_mingw
  maintainers:
    - onnimonni

repo:
  github: midwork-finds-jobs/duckdb-web-archive
  ref: 90c67cb283d668aec7154b8abd3e3001669696b7
  ref_next: 885e02ef3a03af1efcffa8467c8daf74fd8f55a3

docs:
  hello_world: |
    -- Find archived pages from Wayback Machine
    SELECT url, timestamp, statuscode
    FROM wayback_machine()
    WHERE url LIKE 'example.com/%'
      AND statuscode = 200
    LIMIT 10;

    -- One snapshot per year using DISTINCT ON pushdown
    SELECT DISTINCT ON(year) url, timestamp
    FROM wayback_machine()
    WHERE url = 'github.com/duckdb/duckdb'
      AND statuscode = 200
    LIMIT 5;

    -- Query Common Crawl index
    SELECT url, timestamp, mimetype
    FROM common_crawl_index()
    WHERE url LIKE '%.example.com/%'
      AND statuscode = 200
    LIMIT 10;

  extended_description: |
    This extension provides two table functions to query web archive CDX APIs:

    - **wayback_machine()**: Query Internet Archive Wayback Machine (1996-present)
    - **common_crawl_index()**: Query Common Crawl archive (2008-present, monthly snapshots)

    Features:
    - **DISTINCT ON pushdown**: `DISTINCT ON(year)` becomes `&collapse=timestamp:4`
    - **Filter pushdown**: WHERE clauses for statuscode/mimetype pushed to CDX API
    - **LIMIT pushdown**: Only fetches requested number of records
    - **SELECT pushdown**: Only fetches columns you need via `&fl=` parameter
    - **Response fetching**: Download archived page content via `response.body`
    - **Virtual columns**: `year` and `month` extracted from timestamp

    For full documentation, visit the [extension repository](https://github.com/midwork-finds-jobs/duckdb-web-archive).

extension_star_count: 14
extension_star_count_pretty: 14
extension_download_count: 422
extension_download_count_pretty: 422
image: '/images/community_extensions/social_preview/preview_community_extension_web_archive.png'
layout: community_extension_doc
---

### Installing and Loading
```sql
INSTALL {{ page.extension.name }} FROM community;
LOAD {{ page.extension.name }};
```

{% if page.docs.hello_world %}
### Example
```sql
{{ page.docs.hello_world }}```
{% endif %}

{% if page.docs.extended_description %}
### About {{ page.extension.name }}
{{ page.docs.extended_description }}
{% endif %}

### Added Functions

<div class="extension_functions_table"></div>

|   function_name    | function_type | description | comment | examples |
|--------------------|---------------|-------------|---------|----------|
| common_crawl_index | table         | NULL        | NULL    |          |
| wayback_machine    | table         | NULL        | NULL    |          |


