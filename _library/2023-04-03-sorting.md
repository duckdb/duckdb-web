---
layout: post
title: "These Rows Are Made for Sorting and That's Just What We'll Do"
author: "Laurens Kuiper, Hannes Mühleisen"
thumb: "/images/library/thumbs/icde.svg"
image: "/images/library/thumbs/icde.png"
tags: ["Paper"]
thirdparty: false
excerpt: ""
---

[Paper (PDF)](https://duckdb.org/pdf/ICDE2023-kuiper-muehleisen-sorting.pdf)

## Abstract

Sorting is one of the most well-studied problems in computer science and a vital operation for relational database systems. Despite this, little research has been published on implementing an efficient relational sorting operator. In this work, we aim to fill this gap. We use micro-benchmarks to explore how to sort relational data efficiently for analytical database systems, taking into account different query execution engines as well as row and columnar data formats. We show that, regardless of architectural differences between query engines, sorting rows is almost always more efficient than sorting columnar data, even if this requires converting the data from columns to rows and back. Sorting rows efficiently is challenging for systems with an interpreted execution engine, as interpreting rows at runtime causes overhead. We show that this overhead can be overcome with several existing techniques. Based on our findings, we implement a highly optimized row-based sorting approach in the DuckDB open-source in-process analytical database management system, which has a vectorized interpreted query engine. We compare DuckDB with four analytical database systems and find that DuckDB’s sort implementation outperforms query engines that sort using a columnar data format, and matches or outperforms compiled query engines that sort using a row data format.
